# di

Контейнер с инжектором зависимостей

Инжектор это:
1. Это автоматическая подстановка аргументов в конструктор класса или в вызов функции
2. Универсальная фабрика. bind() регистрирует класс/замыкание, которое будет вызвано каждый раз при обращении по ключу. С помощью интерфейсов или строк можно регистрировать сколько угодно фабрик одного и того же класса
3. Единое хранилище для паттерна Одиночка. Вместо хранения одиночек внутри самих себя, можно хранить их в одном контейнере, имея возможность очищать память
4. Это настройка модулей программы. Используя методы boot() в провайдерах можно загружать дополнительные данные, когда этот обьект требуется, а если у модуля есть "провайдер" - то его подключение в другую программу становится удовольствием

* Я предпочел удалить "лишний" функционал, который предоставляют большинство контейнеров, по полному конфигурированию вызываемых методов и их аргументов. 90% времени моей работы мне требовалось подставлять аргументы в функции-замыкания и в конструкторы, остальные задачи решались через декорирование уже объявленных биндов.

Данный контейнер предоставляет следующие функции:
```
set(string $id, mixed $value)
bind(string $id, string|closure|mixed $bound)
singleton(string $id, string|closure|mixed $bound)
```

Виды провайдеров:
1. Provider - обычный файл настройки модуля, используя метод register() удобно задавать бинды, фабрики и синглтоны
2. BootableProvider - поддерживает метод boot(), который будет вызван, когда приложение сделает $di->boot(), а в случае, если уже был сделан - то немедленно после регистрации провайдера
3. DeferableProvider - изменяет поведение метода boot() таким образом, что он вызывается в тот момент, когда инжектор пытается создать класс. Для указания, на какие именно классы он сработает используется метод provides().
